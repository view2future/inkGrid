# Track Specification: Track 4 - 栅格化分割与知识库构建 (Grid-based Segmentation & Knowledge Base)

## 1. 概述
当前基于语义分割 (SAM) 的技术在处理碑帖文字边界时精度不足，且缺乏与文字真值的有效关联。本赛道旨在通过“栅格化 (Grid-based)”的思路，利用篆隶楷三种书体“方正平直”的排版特点，实现高精度的字边界提取。同时，构建完整的碑帖知识库，实现字形与语义的深度关联。

## 2. 功能需求
- **栅格检测引擎 (Grid Detection)**: 
    - 自动识别碑帖中的行列结构，生成初始横竖划线。
    - 支持非均匀格子的智能推断。
- **交互式边界校准 (Interactive Calibration)**:
    - 用户手动调整横竖划线位置。
    - AI 辅助吸附边缘或建议调整。
    - 容错机制：支持在格子缺失、裂痕干扰时手动跳过或合并格子。
- **智能文本对齐 (Semantic Alignment)**:
    - 用户输入碑帖名或选择已知碑帖。
    - OCR 识别结果与已有字库进行序列比对。
    - 支持“局部对全文”的滑动窗口匹配。
- **自动化切分与导出 (Automated Export)**:
    - 按照 `碑帖名_顺序_拼音_字序号` 规则自动保存。
    - 导出高质量单字图片。
- **书法知识库 (Knowledge Base)**:
    - 存储：碑帖名、字体（篆隶楷）、简体字、释义（中英）、拼音、笔顺数据。
    - 检索：支持多维度关键词搜索。

## 3. 技术栈
- **后端**: Python (FastAPI) + OpenCV (Grid detection) + OCR (PaddleOCR/RapidOCR/Advanced cloud API)
- **前端**: React + PixiJS (用于高性能网格渲染与调整)
- **存储**: PostgreSQL / MongoDB (元数据) + 文件存储 (切片图片)

## 4. 验收标准
- 用户上传 `yishan.jpg` 后，系统能自动生成 80% 以上准确的初始网格。
- 用户能通过简单的拖拽完成 100% 准确的字符边界校准。
- 切分出的图片能正确对应真值文字，并以指定格式命名保存。
- 能够通过简体字（如“皇”）检索到所有关联的碑帖单字及释义。
