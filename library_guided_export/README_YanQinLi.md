# é¢œå‹¤ç¤¼ç¢‘ å›¾ç‰‡èµ„æºè·å–æŒ‡å—

## ğŸ“‹ ç¢‘å¸–ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|:---:|:---|
| **ç¢‘å¸–åç§°** | é¢œå‹¤ç¤¼ç¢‘ |
| **ä¹¦ä½“** | æ¥·ä¹¦ (é¢œä½“) |
| **æœä»£** | å” |
| **ç«‹ç¢‘æ—¶é—´** | å¤§å†åå››å¹´ (779å¹´) |
| **ä½œè€…** | é¢œçœŸå¿ (71å²æ—¶ä¹¦) |
| **æ”¶è—åœ°** | è¥¿å®‰ç¢‘æ—åšç‰©é¦† |
| **åˆæ‹“æœ¬** | åŒ—äº¬æ•…å®«åšç‰©é™¢è— |
| **ç¢‘çŸ³å°ºå¯¸** | 175Ã—90Ã—22 å˜ç±³ |
| **æ€»å­—æ•°** | çº¦ 1667 å­— |

### ç¢‘æ–‡ç»“æ„

| éƒ¨ä½ | è¡Œæ•° | æ¯è¡Œå­—æ•° | ä¼°è®¡å­—æ•° |
|:---:|:---:|:---:|:---:|
| **ç¢‘é˜³** | 19è¡Œ | 38å­— | ~722å­— |
| **ç¢‘é˜´** | 20è¡Œ | 38å­— | ~760å­— |
| **ç¢‘ä¾§** | 5è¡Œ | 37å­— | ~185å­— |

---

## ğŸ”— èµ„æºä¸‹è½½é“¾æ¥

### 1. ä¸»è¦èµ„æº - ä¹¦æ ¼ç½‘ â­æ¨è

**é“¾æ¥**: https://old.shuge.org/ebook/yan-qinli-bei/

**å†…å®¹**:
- åŒ—äº¬æ•…å®«åšç‰©é™¢è—æ°‘å›½æ—¶æœŸæ‹“æœ¬
- PDFé«˜æ¸…ç‰ˆ (169MB)
- JPGæ‹“ç‰‡ä¸ƒå¹… (ç¢‘é˜³ã€ç¢‘é˜´ã€ç¢‘ä¾§)
- åŒ…å«å®Œæ•´ç¢‘æ–‡å…¨æ–‡

**ä¸‹è½½æ–¹å¼**:
```bash
# è®¿é—®ç½‘é¡µåï¼Œç‚¹å‡»ä¸‹è½½é“¾æ¥
# æˆ–ä½¿ç”¨ wget ä¸‹è½½ (å¦‚æœç›´æ¥é“¾æ¥å¯ç”¨)
wget -O yanqinlibei.zip "[ä¸‹è½½é“¾æ¥]"
```

### 2. å•å­—èµ„æº - ä¹¦æ³•ç©ºé—´

**é“¾æ¥**: http://www.9610.com/yanlib/

**å†…å®¹**:
- é¢œå‹¤ç¤¼ç¢‘å•å­—é«˜æ¸…å›¾
- æŒ‰éƒ¨é¦–/ç¬”ç”»åˆ†ç±»
- é€‚åˆé€å­—å­¦ä¹ 

### 3. è¾…åŠ©èµ„æº

| ç½‘ç«™ | é“¾æ¥ | å†…å®¹ |
|:---|:---|:---|
| ä¹¦æ³•å­—å…¸ | shufazidian.com | æ•´æ‹“å›¾ |
| 360doc | 360doc.com | å•å­—èµæ |
| æœç‹ä¹¦æ³• | sohu.com | æŠ€æ³•è§£æ |

---

## ğŸ“¥ è·å–æ­¥éª¤

### æ­¥éª¤ 1: åˆ›å»ºç›®å½•ç»“æ„

```bash
# åˆ›å»ºå­˜å‚¨ç›®å½•
mkdir -p steles/3-kaishu/2-yanqinli
mkdir -p test_output/é¢œå‹¤ç¤¼ç¢‘
```

### æ­¥éª¤ 2: ä¸‹è½½å›¾ç‰‡èµ„æº

**æ–¹å¼A - ä¹¦æ ¼ç½‘å®Œæ•´æ‹“æœ¬**:
1. è®¿é—® https://old.shuge.org/ebook/yan-qinli-bei/
2. æ‰¾åˆ°ä¸‹è½½é“¾æ¥ï¼ˆé€šå¸¸åœ¨é¡µé¢åº•éƒ¨ï¼‰
3. ä¸‹è½½ PDF æˆ– JPG æ‹“ç‰‡
4. å°†æ–‡ä»¶ä¿å­˜åˆ° `steles/3-kaishu/2-yanqinli/`

**å»ºè®®æ–‡ä»¶å**:
```
steles/3-kaishu/2-yanqinli/
â”œâ”€â”€ yanqinli_full.jpg     # æ•´ç¢‘æ‹“ç‰‡ï¼ˆæ¨èï¼‰
â”œâ”€â”€ yanqinli_yang.jpg     # ç¢‘é˜³ï¼ˆæ­£é¢ï¼‰
â”œâ”€â”€ yanqinli_yin.jpg      # ç¢‘é˜´ï¼ˆèƒŒé¢ï¼‰
â””â”€â”€ yanqinli_ce.jpg       # ç¢‘ä¾§ï¼ˆä¾§é¢ï¼‰
```

### æ­¥éª¤ 3: ç³»ç»Ÿè‡ªåŠ¨å¤„ç†

ä¸‹è½½å®Œæˆåï¼Œä½¿ç”¨ç³»ç»Ÿå¤„ç†å™¨è¿›è¡Œå•å­—åˆ‡åˆ†ï¼š

```bash
# æ–¹å¼1: ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·
cd processor
python3 process_stele.py \
  --stele "é¢œå‹¤ç¤¼ç¢‘" \
  --input "../steles/3-kaishu/2-yanqinli/yanqinli_full.jpg" \
  --expected-chars 1667

# æ–¹å¼2: ä½¿ç”¨APIæ¥å£
curl -X POST "http://localhost:8000/api/grid/detect" \
  -F "file=@steles/3-kaishu/2-yanqinli/yanqinli_full.jpg" \
  -F "expected_chars=1667"
```

### æ­¥éª¤ 4: éªŒè¯ç»“æœ

å¤„ç†å®Œæˆåï¼Œæ£€æŸ¥è¾“å‡ºç›®å½•ï¼š

```bash
ls test_output/é¢œå‹¤ç¤¼ç¢‘/

# åº”è¯¥åŒ…å«:
# - result.json          (å…ƒæ•°æ®ï¼Œçº¦1667æ¡è®°å½•)
# - visualization.jpg    (å¯è§†åŒ–æ ‡æ³¨å›¾)
# - é¢œå‹¤ç¤¼ç¢‘_char_*.jpg  (å•å­—å›¾ç‰‡ï¼Œçº¦1667å¼ )
```

---

## ğŸ–¼ï¸ å•å­—å›¾ç‰‡å‘½åæ ¼å¼

å¤„ç†å®Œæˆåï¼Œå•å­—å›¾ç‰‡çš„å‘½åæ ¼å¼ï¼š

```
é¢œå‹¤ç¤¼ç¢‘_char_{åºå·:04d}_r{è¡Œ:02d}_c{åˆ—:02d}_{æ±‰å­—}.jpg
```

**ç¤ºä¾‹**:
- `é¢œå‹¤ç¤¼ç¢‘_char_0001_r01_c01_å”.jpg`
- `é¢œå‹¤ç¤¼ç¢‘_char_0038_r01_c38_ç¢‘.jpg`
- `é¢œå‹¤ç¤¼ç¢‘_char_0076_r02_c38_ä¹¦.jpg`
- `é¢œå‹¤ç¤¼ç¢‘_char_1667_r44_c37_é“­.jpg`

---

## ğŸ“Š æ•°æ®å­—æ®µè¯´æ˜

å¤„ç†åçš„ `result.json` åŒ…å«ï¼š

```json
{
  "stele_name": "é¢œå‹¤ç¤¼ç¢‘",
  "script_type": "æ¥·ä¹¦",
  "total_characters": 1667,
  "characters": [
    {
      "index": 1,
      "char": "å”",
      "pinyin": "tÃ¡ng",
      "definition": "æœä»£å",
      "row": 1,
      "col": 1,
      "bbox": [y, x, height, width],
      "sliced_image": "é¢œå‹¤ç¤¼ç¢‘_char_0001_r01_c01_å”.jpg",
      "side": "ç¢‘é˜³"
    }
  ]
}
```

---

## ğŸ” å¿«é€Ÿè·å–å°‘é‡ç¤ºä¾‹å›¾

å¦‚éœ€å¿«é€Ÿæµ‹è¯•ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹Pythonè„šæœ¬ä¸‹è½½å•å­—ç¤ºä¾‹ï¼š

```python
#!/usr/bin/env python3
"""ä¸‹è½½é¢œå‹¤ç¤¼ç¢‘ç¤ºä¾‹å•å­—å›¾"""

import requests
import os

# ä¸€äº›å·²çŸ¥çš„å•å­—å›¾URL (ç¤ºä¾‹)
sample_urls = {
    "å”": "http://www.9610.com/yanlib/tang.jpg",
    "æ•…": "http://www.9610.com/yanlib/gu.jpg",
    "ç§˜": "http://www.9610.com/yanlib/mi.jpg",
    # ... æ›´å¤šå­—
}

output_dir = "steles/3-kaishu/2-yanqinli/samples"
os.makedirs(output_dir, exist_ok=True)

for char, url in sample_urls.items():
    try:
        response = requests.get(url, timeout=10)
        if response.status_code == 200:
            filepath = f"{output_dir}/é¢œå‹¤ç¤¼ç¢‘_{char}.jpg"
            with open(filepath, 'wb') as f:
                f.write(response.content)
            print(f"âœ… ä¸‹è½½æˆåŠŸ: {char}")
        else:
            print(f"âŒ ä¸‹è½½å¤±è´¥: {char}")
    except Exception as e:
        print(f"âŒ é”™è¯¯: {char} - {e}")
```

---

## ğŸ“ å…¨æ–‡å†…å®¹ (1343å­—)

```
å”æ•…ç§˜ä¹¦çœè‘—ä½œéƒå¤”å·éƒ½ç£åºœé•¿å²ä¸ŠæŠ¤å†›é¢œå›ç¥é“ç¢‘
æ›¾å­™é²éƒ¡å…¬çœŸå¿æ’°å¹¶ä¹¦

å›è®³å‹¤ç¤¼ï¼Œå­—æ•¬ï¼Œç…çŠä¸´æ²‚äººä¹Ÿã€‚é«˜ç¥–è®³è§è¿œï¼Œé½å¾¡å²ä¸­ä¸ï¼Œæ¢æ­¦å¸å—ç¦…ï¼Œ
ä¸é£Ÿæ•°æ—¥ï¼Œä¸€æ¸è€Œç»ï¼Œäº‹è§æ¢ä¹¦ã€‚æ›¾ç¥–è®³åï¼Œæ¢æ¹˜ä¸œç‹è®°å®¤å‚å†›ï¼Œæ–‡è‹‘æœ‰ä¼ ã€‚
ç¥–è®³ä¹‹æ¨ï¼ŒåŒ—é½ç»™äº‹é»„é—¨ä¾éƒï¼Œéš‹ä¸œå®«å­¦å£«ï¼Œé½ä¹¦æœ‰ä¼ ã€‚çˆ¶è®³æ€é²ï¼Œåšå­¦å–„
å±æ–‡ï¼Œå°¤å·¥è¯‚è®­ï¼Œä»•éš‹å¸ç»æ ¡ä¹¦ã€ä¸œå®«å­¦å£«ï¼Œç‡æ›´ä»¤æ¬§é˜³è¯¢è§è€Œå¹æ›°ï¼šç§˜ä¹¦è‡ª
æœ‰è‹±ä¸»ï¼Œå› æ­¤é‚å...

[å®Œæ•´å…¨æ–‡è§ processor/data/steles.json ä¸­ "é¢œå‹¤ç¤¼ç¢‘" çš„ content å­—æ®µ]
```

---

## ğŸ¨ ä¹¦æ³•ç‰¹ç‚¹

é¢œå‹¤ç¤¼ç¢‘æ˜¯é¢œçœŸå¿**æ™šå¹´æ¥·ä¹¦å·…å³°ä¹‹ä½œ**ï¼Œç‰¹ç‚¹åŒ…æ‹¬ï¼š

1. **æ¨ªç»†ç«–ç²—** - æ¨ªç”»çº¤ç»†ï¼Œç«–ç”»ç²—å£®
2. **è—å¤´æŠ¤å°¾** - èµ·æ”¶ç¬”å«è“„æœ‰åŠ›
3. **æ–¹åœ†å¹¶ç”¨** - è½¬æŠ˜å¤„æ–¹åœ†ç»“åˆ
4. **ç»“ä½“å®½åš** - å­—å½¢å¼€é˜”å¤§æ°”
5. **æ°”åŠ¿æ¢å®** - æ•´ä½“ç«¯åº„é›„æµ‘

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **1667 vs 1343**: 
   - ç¢‘å¸–å®é™…çº¦ **1667å­—** (ä¸‰é¢åˆè®¡)
   - æ•°æ®åº“å…¨æ–‡è®°å½• **1343å­—** (ä¸»è¦ç¢‘æ–‡éƒ¨åˆ†)
   - å·®å¼‚æ¥è‡ªç¢‘é¢ã€ç¢‘é˜´é¢˜åç­‰éæ­£æ–‡å†…å®¹

2. **æ‹“æœ¬é€‰æ‹©**:
   - **åˆæ‹“æœ¬**: "æ•…"å­—æœªæŸï¼Œæœ€ä½³
   - "ç¢‘"å­—å³ç«–æœªæŸä¸ºæ—©æœŸæ ‡å¿—
   - é¿å…ä½¿ç”¨å®‹äººåˆ»å­—éƒ¨åˆ†ï¼ˆå³ä¾§14å­—ï¼‰

3. **å›¾ç‰‡å¤„ç†**:
   - åŸç¢‘æœ‰æ–­è£‚ï¼Œå¤„ç†æ—¶éœ€æ³¨æ„
   - éƒ¨åˆ†å­—è¿¹é£åŒ–æ¨¡ç³Šï¼Œå¯èƒ½è¯†åˆ«ä¸º"â–¡"
   - å»ºè®®åˆ†è¾¨ç‡: 300 DPI ä»¥ä¸Š

---

## ğŸ“ æ–‡ä»¶ç»“æ„ (ç›®æ ‡çŠ¶æ€)

```
inkGrid/
â”œâ”€â”€ steles/3-kaishu/2-yanqinli/
â”‚   â”œâ”€â”€ yanqinli_full.jpg           # ä¸‹è½½çš„åŸç¢‘å›¾
â”‚   â”œâ”€â”€ yanqinli_segmented.jpg      # åˆ†å‰²å¤„ç†å›¾
â”‚   â”œâ”€â”€ yanqinli_paddle.jpg         # OCRæ£€æµ‹å›¾
â”‚   â””â”€â”€ yanqinli_paddle_gt.jpg      # æ ‡æ³¨çœŸå€¼å›¾
â”‚
â”œâ”€â”€ test_output/é¢œå‹¤ç¤¼ç¢‘/
â”‚   â”œâ”€â”€ result.json                 # å…ƒæ•°æ® (~1667æ¡)
â”‚   â”œâ”€â”€ analysis.json               # åˆ†ææŠ¥å‘Š
â”‚   â”œâ”€â”€ visualization.jpg           # å¯è§†åŒ–å›¾
â”‚   â””â”€â”€ é¢œå‹¤ç¤¼ç¢‘_char_*.jpg         # å•å­—å›¾ (~1667å¼ )
â”‚
â””â”€â”€ library_guided_export/
    â”œâ”€â”€ yanqinli_index.json         # èµ„æºç´¢å¼•
    â”œâ”€â”€ download_yanqinli.sh        # ä¸‹è½½è„šæœ¬
    â””â”€â”€ README_YanQinLi.md          # æœ¬æŒ‡å—
```

---

## âœ… æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»ºç›®å½• `steles/3-kaishu/2-yanqinli`
- [ ] ä»ä¹¦æ ¼ç½‘ä¸‹è½½é«˜æ¸…æ‹“æœ¬
- [ ] ä¿å­˜åŸå›¾åˆ°æ­£ç¡®ä½ç½®
- [ ] è¿è¡Œå¤„ç†å™¨åˆ‡åˆ†å•å­—
- [ ] éªŒè¯è¾“å‡ºç»“æœ (~1667å¼ å•å­—å›¾)
- [ ] ä½¿ç”¨æŸ¥çœ‹å™¨æµ‹è¯•æŸ¥æ‰¾åŠŸèƒ½

---

## ğŸ”— ç›¸å…³èµ„æº

- ç³»ç»Ÿå…ƒæ•°æ®: `processor/data/steles.json` (é¢œå‹¤ç¤¼ç¢‘å…¨æ–‡å·²å½•å…¥)
- æŸ¥çœ‹å™¨è„šæœ¬: `library_guided_export/yishan_keshi_viewer.py` (å¯å¤ç”¨)
- ä¸‹è½½è„šæœ¬: `library_guided_export/download_yanqinli.sh`

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿ** æŒ‰ç…§ä¸Šè¿°æ­¥éª¤ï¼Œå³å¯è·å–é¢œå‹¤ç¤¼ç¢‘çš„å®Œæ•´å›¾ç‰‡èµ„æºï¼
